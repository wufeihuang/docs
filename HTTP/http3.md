# HTTP/3

> [HTTP/3 \- 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/HTTP/3)
>
> [QUIC \- 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/QUIC)

HTTP/3 尚未发布标准版本。

在 HTTP/3 中，将弃用 TCP 协议，改为使用基于 UDP 协议的 QUIC 协议实现。

此变化主要为了解决 HTTP/2 中存在的队头阻塞问题。由于 HTTP/2 在单个 TCP 连接上使用了多路复用，受到 TCP 拥塞控制的影响，少量的丢包就可能导致整个 TCP 连接上的所有流被阻塞。

QUIC（快速UDP网络连接）是一种实验性的网络传输协议，由 Google 开发，该协议旨在使网页传输更快。

## TCP 阻塞问题

TCP（传输控制协议）将数据分解成网络封包，并在每个数据包中添加少量数据用于校验。

当其中任何一个问题发生时，TCP 使用自动重传请求（ARQ）告诉发送方重新发送丢失或损坏的数据包。

在大多数实现中，TCP 会将连接上的任何错误视为阻塞，停止进一步传输，直到错误得到解决或连接被视为失败。

如果使用单个连接来发送多个数据流，就像在 HTTP/2 中那样，所有这些数据流都会被阻止，尽管其中可能只有一个有问题。

## QUIC

QUIC 旨在提供几乎等同于 TCP 连接的可靠性，但延迟大大减少。

1）在连接建立期间大大减少开销。基于 UDP 协议；在修复单个数据流时可以自由地处理其他数据，也就是即使一个请求发生了错误也不会影响到其他的请求。

2）提高网络切换期间的性能。比如当移动设备从 wifi 切换到移动网络时，基于 TCP 时需要现有连接一个接一个超时，然后根据需要重新建立，期间存在较高延迟。而 QUIC 包含一个连接标识符，该标识符唯一地标识客户端与服务器的连接，而无论源 IP 地址是什么，这样在网络切换时可以更快地重建连接。

## gQUIC 与 iQUIC

QUIC 协议最初由 Google 的 Jim Roskind 设计，2012年实现并部署。gQUIC 严格来说是通过加密 UDP 发送 HTTP/2 帧的协议。

2015年6月，QUIC规范的互联网草案提交给 IETF 进行标准化。iQUIC 是通用协议，HTTP 意外的其他协议（如 SMTP、DNS、SSH、Telnet、NTP）也可以使用它。

